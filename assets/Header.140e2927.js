import{R as e,r as a}from"./vendor.1d4aa5a0.js";import{F as f,s as x}from"./index.d14697a2.js";import{B as w}from"./index.esm.a79a1276.js";import{G as E}from"./iconBase.b0f8e610.js";import{d as C,u as L}from"./useUser.55c61266.js";function y({error:t}){return t?e.createElement("div",{className:"alert alert-danger",role:"alert"},t):e.createElement(e.Fragment,null)}function k(t){return E({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M21 15v3h3v2h-3v3h-2v-3h-3v-2h3v-3h2zm.008-12c.548 0 .992.445.992.993V13h-2V5H4v13.999L14 9l3 3v2.829l-3-3L6.827 19H14v2H2.992A.993.993 0 0 1 2 20.007V3.993A1 1 0 0 1 2.992 3h18.016zM8 7a2 2 0 1 1 0 4 2 2 0 0 1 0-4z"}}]}]})(t)}function P(t){return E({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M10 11V8l5 4-5 4v-3H1v-2h9zm-7.542 4h2.124A8.003 8.003 0 0 0 20 12 8 8 0 0 0 4.582 9H2.458C3.732 4.943 7.522 2 12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10c-4.478 0-8.268-2.943-9.542-7z"}}]}]})(t)}function R(t){return E({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2a9.985 9.985 0 0 1 8 4h-2.71a8 8 0 1 0 .001 12h2.71A9.985 9.985 0 0 1 12 22zm7-6v-3h-8v-2h8V8l5 4-5 4z"}}]}]})(t)}function S(){const{fire:t}=a.exports.useContext(f),[s,m]=a.exports.useState(""),[c,n]=a.exports.useState(""),[d,g]=a.exports.useState(""),[p,i]=a.exports.useState(!1),o=a.exports.useRef(null),u=()=>{console.log("hello")},b=async l=>{l.preventDefault();try{i(!0),await t.auth().signInWithEmailAndPassword(s,c),i(!1),o.current.click()}catch(v){m(""),n(""),g(v.message),i(!1)}};return e.createElement("div",null,e.createElement("button",{style:{border:"none",background:"none"},"data-bs-toggle":"modal","data-bs-target":"#modalLogin"},e.createElement(P,{size:"30"})),e.createElement("div",{className:"modal fade",id:"modalLogin",tabIndex:-1,"aria-labelledby":"modalLoginLabel","aria-hidden":"true"},e.createElement("div",{className:"modal-dialog modal-dialog-centered"},e.createElement("div",{className:"modal-content"},e.createElement("div",{className:"modal-header"},e.createElement("h5",{className:"modal-title",id:"modalLoginLabel"},"Login"),e.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",ref:o,onKeyDown:l=>l.key==="Esc"})),e.createElement("div",{className:"modal-body"},e.createElement("form",{onSubmit:b,onKeyDown:l=>l.key==="Enter"&&b,className:"py-3"},e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"email",className:"form-label"},"Email"),e.createElement("input",{type:"email",className:"form-control",placeholder:"email@example.com",onChange:({target:l})=>m(l.value),value:s,minLength:"6",maxLength:"50"})),e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"password",className:"form-label"},"Password"),e.createElement("input",{type:"password",className:"form-control",placeholder:"Password (min leangth = 6)",onChange:({target:l})=>n(l.value),value:c,minLength:"6",maxLength:"50"})),e.createElement("button",{type:"submit",className:"btn btn-primary me-2"},"Login"),e.createElement("button",{className:"btn btn-outline-primary",onClick:()=>u()},"Login with Google ",e.createElement(w,{className:"mb-1",size:"19"}))),e.createElement(y,{error:d}),p&&e.createElement("div",{className:"text-center"},e.createElement("div",{className:"spinner-border text-dark ",role:"status"})))))))}function z(t){return E({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"}},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"}},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"}}]})(t)}function A(){const{fire:t}=a.exports.useContext(f),[s,m]=a.exports.useState(""),[c,n]=a.exports.useState(""),[d,g]=a.exports.useState(""),[p,i]=a.exports.useState(""),[o,u]=a.exports.useState(""),[b,l]=a.exports.useState(!1),v=a.exports.useRef(null),N=async r=>{if(r.preventDefault(),l(!0),await C(s))m(""),u("That name is already taken, please try another."),l(!1);else try{const h=await t.auth().createUserWithEmailAndPassword(c,d);await h.user.updateProfile({displayName:s}),await t.firestore().collection("users").add({userId:h.user.uid,name:s.toLowerCase(),email:c.toLowerCase(),following:[],followers:[],dateCreated:Date.now(),posts:[],avatar:""}),l(!1),v.current.click()}catch(h){n(""),u(h.message),l(!1)}};return e.createElement("div",null,e.createElement("button",{style:{border:"none",background:"none"},"data-bs-toggle":"modal","data-bs-target":"#modalRegister"},e.createElement(z,{size:"30"})),e.createElement("div",{className:"modal fade",id:"modalRegister",tabIndex:-1,"aria-labelledby":"modalRegisterLabel","aria-hidden":"true"},e.createElement("div",{className:"modal-dialog modal-dialog-centered"},e.createElement("div",{className:"modal-content"},e.createElement("div",{className:"modal-header"},e.createElement("h5",{className:"modal-title",id:"modalRegisterLabel"},"Register"),e.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",ref:v,onKeyDown:r=>r.key==="Esc"})),e.createElement("div",{className:"modal-body"},e.createElement("form",{onSubmit:N,onKeyDown:r=>r.key==="Enter"&&N,className:"py-3"},e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"name",className:"form-label"},"Name"),e.createElement("input",{required:!0,type:"text",className:"form-control",placeholder:"Anri Okita",onChange:({target:r})=>m(r.value),value:s,required:!0,maxLength:"50",autoComplete:"one-time-code"})),e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"email",className:"form-label"},"Email"),e.createElement("input",{required:!0,type:"email",className:"form-control",placeholder:"Email@example.com",onChange:({target:r})=>n(r.value),value:c,required:!0,maxLength:"50",autoComplete:"one-time-code"})),e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"password",className:"form-label"},"Password"),e.createElement("input",{required:!0,type:"password",className:"form-control",placeholder:"Password (min leangth = 6, max length = 50)",onChange:({target:r})=>g(r.value),value:d,minLength:"6",maxLength:"50",autoComplete:"one-time-code"})),e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"confirmPassword",className:"form-label"},"Confirm Password"),e.createElement("input",{required:!0,type:"password",className:"form-control",placeholder:"Confirm Password",onChange:({target:r})=>i(r.value),value:p,pattern:d,autoComplete:"one-time-code"})),e.createElement("button",{type:"submit",className:"btn btn-primary me-2"},"Register")),e.createElement(y,{error:o}),b&&e.createElement("div",{className:"text-center"},e.createElement("div",{className:"spinner-border text-dark ",role:"status"})))))))}var M="/assets/logo.7e8cfe4c.svg";function F(){const[t,s]=a.exports.useState(null),[m,c]=a.exports.useState(""),[n,d]=a.exports.useState(0),g=i=>{i.target.files[0]&&s(i.target.files[0])},p=()=>{x.ref(`images/${t.name}`).put(t).on("state_changed",o=>{const u=Math.round(o.bytesTransferred/o.totalBytes*100);d(u)},o=>{console.log(o)},()=>{x.ref("images").child(t.name).getDownloadURL().then(o=>{c(o)})})};return e.createElement("div",null,e.createElement(k,{style:{marginRight:18},role:"button",size:"30","data-bs-toggle":"modal","data-bs-target":"#modalAddPost"}),e.createElement("div",{className:"modal fade",id:"modalAddPost",tabIndex:-1,"aria-labelledby":"modalAddPostLabel","aria-hidden":"true"},e.createElement("div",{className:"modal-dialog modal-dialog-centered"},e.createElement("div",{className:"modal-content"},e.createElement("div",{className:"modal-header"},e.createElement("h5",{className:"modal-title",id:"modalAddPostLabel"},"Post"),e.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),e.createElement("div",{className:"modal-body"},e.createElement("div",{className:"container"},e.createElement("div",{className:"row"},e.createElement("input",{className:"col-6 col-sm-6 mb-2",type:"file",onChange:g}),e.createElement("div",{className:"text-center col-6 col-sm-6 mb-2"},e.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:p,style:{width:80}},"Upload")),e.createElement("img",{src:m||"http://via.placeholder.com/500",alt:"firebase-image",className:"col-sm-12 img-fluid mb-2"}),e.createElement("progress",{value:n,max:"100",className:"col-sm-12 mb-2"}),e.createElement("p",null,m&&"Upload success"))))))))}const U=a.exports.createContext(null);var H=U;function T({setPage:t,user:s}){const{user:m,setActiveUser:c}=L(s==null?void 0:s.uid),{fire:n}=a.exports.useContext(f);return e.createElement(H.Provider,{value:{user:m,setActiveUser:c}},e.createElement("nav",{style:{position:"sticky",top:0,zIndex:1051},className:"navbar navbar-expand navbar-light"},e.createElement("div",{className:"container"},e.createElement("img",{role:"button",src:M,alt:"Logo OnlyDog",width:200,onClick:()=>{t("dashboard")}}),e.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},e.createElement("span",{className:"navbar-toggler-icon"})),e.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},e.createElement("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0"}),e.createElement("div",{className:`${n.auth().currentUser?"":"d-none"} d-flex`},e.createElement(F,null),e.createElement("img",{role:"button",width:"30",className:"me-3 rounded-circle",src:"https://placedog.net/500?random",onClick:()=>{t("profile")},style:{objectFit:"cover"}}),e.createElement(R,{role:"button",size:"30",onClick:()=>n.auth().signOut()})),e.createElement("div",{className:`${n.auth().currentUser?"d-none":""} d-flex`},e.createElement("div",{className:"nav-item me-2 mt-2"},e.createElement(S,null)),e.createElement("div",{className:"nav-item me-2 mt-2"},e.createElement(A,null)))))))}export{T as default};
