var Ae=Object.defineProperty,Ie=Object.defineProperties;var He=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var le=(e,t,o)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,v=(e,t)=>{for(var o in t||(t={}))se.call(t,o)&&le(e,o,t[o]);if(D)for(var o of D(t))re.call(t,o)&&le(e,o,t[o]);return e},w=(e,t)=>Ie(e,He(t));var $=(e,t)=>{var o={};for(var s in e)se.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&D)for(var s of D(e))t.indexOf(s)<0&&re.call(e,s)&&(o[s]=e[s]);return o};import{r as n,L as W,b as ie}from"./vendor.e39436fc.js";import{t as ce}from"./toTop.4c4a9307.js";import{j as a,a as f,A as G,b as de,F as je}from"./index.4a29b043.js";import{G as H}from"./iconBase.bc17050a.js";import{c as O,u as B,S as ue}from"./SpinnerBootstrap.b9facf5c.js";import{t as Pe,T as pe,a as fe,s as he,E as Fe,b as me,c as _,d as ge,u as ve,e as X,A as ze,f as De,M as Ge,B as Ve,F as Ue,g as Je,h as We,i as _e,j as A,k as u,l as xe,m as I,n as Xe}from"./ModalImage.cc091c63.js";import{g as Ke}from"./grey.19af5ccb.js";import{g as Ze}from"./getUserIdFromAccessToken.21bec7ee.js";var qe="/assets/logo.ada3b726.svg",Qe=n.exports.memo(function(){return a(W,{to:"/",onClick:()=>ce(),children:a("img",{role:"button",src:qe,alt:"Logo OnlyDog",width:200,style:{userSelect:"none"},className:"my-2",title:"T\u1EA5t nhi\xEAn l\xE0 tr\u1EEB admin ra, ahihi :33"})})});function j(...e){return e.filter(t=>t!=null).reduce((t,o)=>{if(typeof o!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?o:function(...r){t.apply(this,r),o.apply(this,r)}},null)}const Ye={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function be(e,t){const o=`offset${e[0].toUpperCase()}${e.slice(1)}`,s=t[o],r=Ye[e];return s+parseInt(he(t,r[0]),10)+parseInt(he(t,r[1]),10)}const et={[Fe]:"collapse",[me]:"collapsing",[_]:"collapsing",[ge]:"collapse show"},tt={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:be},ye=ie.forwardRef((x,m)=>{var b=x,{onEnter:e,onEntering:t,onEntered:o,onExit:s,onExiting:r,className:l,children:i,dimension:c="height",getDimensionValue:h=be}=b,g=$(b,["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"]);const d=typeof c=="function"?c():c,N=n.exports.useMemo(()=>j(p=>{p.style[d]="0"},e),[d,e]),C=n.exports.useMemo(()=>j(p=>{const y=`scroll${d[0].toUpperCase()}${d.slice(1)}`;p.style[d]=`${p[y]}px`},t),[d,t]),R=n.exports.useMemo(()=>j(p=>{p.style[d]=null},o),[d,o]),E=n.exports.useMemo(()=>j(p=>{p.style[d]=`${h(d,p)}px`,Pe(p)},s),[s,h,d]),S=n.exports.useMemo(()=>j(p=>{p.style[d]=null},r),[d,r]);return a(pe,w(v({ref:m,addEndListener:fe},g),{"aria-expanded":g.role?g.in:null,onEnter:N,onEntering:C,onEntered:R,onExit:E,onExiting:S,childRef:i.ref,children:(p,y)=>ie.cloneElement(i,w(v({},y),{className:O(l,i.props.className,et[p],d==="width"&&"collapse-horizontal")}))}))});ye.defaultProps=tt;var at=ye;const ot=n.exports.createContext(null);var nt=ot;const Ne=n.exports.createContext(null);Ne.displayName="NavbarContext";var P=Ne;const st={fluid:!1},K=n.exports.forwardRef((i,l)=>{var c=i,{bsPrefix:e,fluid:t,as:o="div",className:s}=c,r=$(c,["bsPrefix","fluid","as","className"]);const h=B(e,"container"),g=typeof t=="string"?`-${t}`:"-fluid";return a(o,w(v({ref:l},r),{className:O(s,t?`${h}${g}`:h)}))});K.displayName="Container";K.defaultProps=st;var rt=K;const Ce=n.exports.forwardRef((l,r)=>{var i=l,{bsPrefix:e,className:t,as:o}=i,s=$(i,["bsPrefix","className","as"]);e=B(e,"navbar-brand");const c=o||(s.href?"a":"span");return a(c,w(v({},s),{ref:r,className:O(t,e)}))});Ce.displayName="NavbarBrand";var lt=Ce;const we=n.exports.forwardRef((r,s)=>{var l=r,{children:e,bsPrefix:t}=l,o=$(l,["children","bsPrefix"]);t=B(t,"navbar-collapse");const i=n.exports.useContext(P);return a(at,w(v({in:!!(i&&i.expanded)},o),{children:a("div",{ref:s,className:t,children:e})}))});we.displayName="NavbarCollapse";var it=we;const ct={label:"Toggle navigation"},Z=n.exports.forwardRef((h,c)=>{var g=h,{bsPrefix:e,className:t,children:o,label:s,as:r="button",onClick:l}=g,i=$(g,["bsPrefix","className","children","label","as","onClick"]);e=B(e,"navbar-toggler");const{onToggle:m,expanded:x}=n.exports.useContext(P)||{},b=ve(d=>{l&&l(d),m&&m()});return r==="button"&&(i.type="button"),a(r,w(v({},i),{ref:c,onClick:b,"aria-label":s,className:O(t,e,!x&&"collapsed"),children:o||a("span",{className:`${e}-icon`})}))});Z.displayName="NavbarToggle";Z.defaultProps=ct;var dt=Z,ut=X("offcanvas-body");const pt={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1},ft={[_]:"show",[ge]:"show"},q=n.exports.forwardRef((l,r)=>{var i=l,{bsPrefix:e,className:t,children:o}=i,s=$(i,["bsPrefix","className","children"]);return e=B(e,"offcanvas"),a(pe,w(v({ref:r,addEndListener:fe},s),{childRef:o.ref,children:(c,h)=>n.exports.cloneElement(o,w(v({},h),{className:O(t,o.props.className,(c===_||c===me)&&`${e}-toggling`,ft[c])}))}))});q.defaultProps=pt;q.displayName="OffcanvasToggling";var ht=q;const mt={closeLabel:"Close",closeButton:!1},Q=n.exports.forwardRef((r,s)=>{var l=r,{bsPrefix:e,className:t}=l,o=$(l,["bsPrefix","className"]);return e=B(e,"offcanvas-header"),a(ze,w(v({ref:s},o),{className:O(t,e)}))});Q.displayName="OffcanvasHeader";Q.defaultProps=mt;var gt=Q;const vt=De("h5");var xt=X("offcanvas-title",{Component:vt});const bt={show:!1,backdrop:!0,keyboard:!0,scroll:!1,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,placement:"start"};function yt(e){return a(ht,v({},e))}function Nt(e){return a(Ue,v({},e))}const Y=n.exports.forwardRef((Pt,Le)=>{var oe=Pt,{bsPrefix:e,className:t,children:o,"aria-labelledby":s,placement:r,show:l,backdrop:i,keyboard:c,scroll:h,onEscapeKeyDown:g,onShow:m,onHide:x,container:b,autoFocus:d,enforceFocus:N,restoreFocus:C,restoreFocusOptions:R,onEntered:E,onExit:S,onExiting:p,onEnter:y,onEntering:T,onExited:F,backdropClassName:z,manager:k}=oe,L=$(oe,["bsPrefix","className","children","aria-labelledby","placement","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"]);const V=n.exports.useRef();e=B(e,"offcanvas");const{onToggle:ne}=n.exports.useContext(P)||{},U=ve(()=>{ne==null||ne(),x==null||x()}),Ee=n.exports.useMemo(()=>({onHide:U}),[U]);function Me(){return k||(h?(V.current||(V.current=new Je({handleContainerOverflow:!1})),V.current):We())}const $e=(M,...J)=>{M&&(M.style.visibility="visible"),y==null||y(M,...J)},Re=(M,...J)=>{M&&(M.style.visibility=""),F==null||F(...J)},Oe=n.exports.useCallback(M=>a("div",w(v({},M),{className:O(`${e}-backdrop`,z)})),[z,e]),Be=M=>a("div",w(v(v({role:"dialog"},M),L),{className:O(t,e,`${e}-${r}`),"aria-labelledby":s,children:o}));return a(Ge.Provider,{value:Ee,children:a(Ve,{show:l,ref:Le,backdrop:i,container:b,keyboard:c,autoFocus:d,enforceFocus:N&&!h,restoreFocus:C,restoreFocusOptions:R,onEscapeKeyDown:g,onShow:m,onHide:U,onEnter:$e,onEntering:T,onEntered:E,onExit:S,onExiting:p,onExited:Re,manager:Me(),transition:yt,backdropTransition:Nt,renderBackdrop:Oe,renderDialog:Be})})});Y.displayName="Offcanvas";Y.defaultProps=bt;var Ct=Object.assign(Y,{Body:ut,Header:gt,Title:xt});const Se=n.exports.forwardRef((e,t)=>{const o=n.exports.useContext(P);return a(Ct,v({ref:t,show:!!(o!=null&&o.expanded)},e))});Se.displayName="NavbarOffcanvas";var wt=Se;const St=X("navbar-text",{Component:"span"}),Tt={expand:!0,variant:"light",collapseOnSelect:!1},ee=n.exports.forwardRef((e,t)=>{const p=_e(e,{expanded:"onToggle"}),{bsPrefix:o,expand:s,variant:r,bg:l,fixed:i,sticky:c,className:h,as:g="nav",expanded:m,onToggle:x,onSelect:b,collapseOnSelect:d}=p,N=$(p,["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"]),C=B(o,"navbar"),R=n.exports.useCallback((...y)=>{b==null||b(...y),d&&m&&(x==null||x(!1))},[b,d,m,x]);N.role===void 0&&g!=="nav"&&(N.role="navigation");let E=`${C}-expand`;typeof s=="string"&&(E=`${E}-${s}`);const S=n.exports.useMemo(()=>({onToggle:()=>x==null?void 0:x(!m),bsPrefix:C,expanded:!!m}),[C,m,x]);return a(P.Provider,{value:S,children:a(nt.Provider,{value:R,children:a(g,w(v({ref:t},N),{className:O(h,C,s&&E,r&&`${C}-${r}`,l&&`bg-${l}`,c&&`sticky-${c}`,i&&`fixed-${i}`)}))})})});ee.defaultProps=Tt;ee.displayName="Navbar";var te=Object.assign(ee,{Brand:lt,Collapse:it,Offcanvas:wt,Text:St,Toggle:dt});function kt(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(e)}function Lt(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"}},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"}},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"}}]})(e)}var Et=n.exports.memo(function({find:t,setFind:o}){return a("div",{className:"d-flex justify-content-center my-3",style:{width:"100%"},children:f("div",{className:"d-flex",children:[a("input",{className:"form-control me-2 p-1 bg-light border-0",placeholder:"Find user",onChange:s=>o(s.target.value),value:t}),a(W,{to:"/find?user_name="+t,children:a("div",{role:"button",className:"bg-light rounded pt-1 pb-2 px-3 text-muted",children:a(kt,{size:20})})})]})})});function Mt(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M21 15v3h3v2h-3v3h-2v-3h-3v-2h3v-3h2zm.008-12c.548 0 .992.445.992.993V13h-2V5H4v13.999L14 9l3 3v2.829l-3-3L6.827 19H14v2H2.992A.993.993 0 0 1 2 20.007V3.993A1 1 0 0 1 2.992 3h18.016zM8 7a2 2 0 1 1 0 4 2 2 0 0 1 0-4z"}}]}]})(e)}function $t(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M4 15h2v5h12V4H6v5H4V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-6zm6-4V8l5 4-5 4v-3H2v-2h8z"}}]}]})(e)}function Rt(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M5 22a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v3h-2V4H6v16h12v-2h2v3a1 1 0 0 1-1 1H5zm13-6v-3h-7v-2h7V8l5 4-5 4z"}}]}]})(e)}const Te="^(?=.*[A-Za-z])(?=.*\\d).{6,30}$",ke="^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$";function ae(e,t,o,s){e?localStorage.setItem("accessToken",JSON.stringify(e)):localStorage.removeItem("accessToken"),t?localStorage.setItem("refreshToken",JSON.stringify(t)):localStorage.removeItem("refreshToken"),o(e),s(t)}var Ot=n.exports.memo(function(){const[t,o]=n.exports.useState(""),[s,r]=n.exports.useState(""),[l,i]=n.exports.useState(""),[c,h]=n.exports.useState(!1),[g,m]=n.exports.useState(!1),{setStateAccessToken:x,setStateRefreshToken:b}=n.exports.useContext(G),{showModalLogin:d,setShowModalLogin:N,setShowModalRegister:C}=n.exports.useContext(de),R=()=>N(!1),E=()=>N(!0),S=y=>{y.preventDefault(),h(!0),fetch("http://localhost:5500/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:s})}).then(T=>T.json()).then(T=>{T.success?(i(""),N(!1),ae(T.accessToken,T.refreshToken,x,b)):i(T.message),h(!1)}).catch(T=>{i(T.toString()),h(!1)})},p=()=>{N(!1),C(!0)};return n.exports.useEffect(()=>{m(!!(t&&s))},[t,s]),f(je,{children:[a($t,{role:"button",size:"30",onClick:E,className:"me-3 text-muted"}),f(A,{show:d,onHide:R,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[a(A.Header,{closeButton:!0,children:a(A.Title,{children:"Login"})}),a(A.Body,{children:f(u,{onSubmit:S,children:[f(u.Group,{className:"mb-3",children:[a(u.Label,{children:"Email address"}),a(u.Control,{type:"email",placeholder:"Enter email",onChange:({target:y})=>o(y.value),value:t,maxLength:"30",pattern:ke}),a(u.Text,{className:"text-muted",children:"Max length email is 20"})]}),f(u.Group,{className:"mb-3",children:[a(u.Label,{children:"Password"}),a(u.Control,{type:"password",placeholder:"Password",onChange:({target:y})=>r(y.value),value:s,pattern:Te}),a(u.Text,{className:"text-muted",children:"Must contain at least one number, one letter or more characters and at least 6"})]}),l&&a(xe,{variant:"danger",children:l}),f("div",{className:"d-flex justify-content-between",children:[c?f(I,{variant:"primary",disabled:!0,children:[a(ue,{}),"Loading..."]}):a(I,{variant:"primary",type:"submit",disabled:!g,children:"Login"}),a(I,{variant:"primary",className:"float-end",onClick:p,children:"Register"})]})]})})]})]})});const Bt="^[\\w]{1,30}$";var At=n.exports.memo(function(){const[t,o]=n.exports.useState(""),[s,r]=n.exports.useState(""),[l,i]=n.exports.useState(""),[c,h]=n.exports.useState(""),[g,m]=n.exports.useState(""),[x,b]=n.exports.useState(!1),[d,N]=n.exports.useState(!1),{setStateAccessToken:C,setStateRefreshToken:R}=n.exports.useContext(G),{showModalRegister:E,setShowModalRegister:S,setShowModalLogin:p}=n.exports.useContext(de),y=()=>S(!1),T=()=>S(!0),F=k=>{k.preventDefault(),b(!0),fetch("http://localhost:5500/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:t,email:s,password:l})}).then(L=>L.json()).then(L=>{L.success?m(null):m(L.message),localStorage.setItem("accessToken",JSON.stringify(L.accessToken)),localStorage.setItem("refreshToken",JSON.stringify(L.refreshToken)),b(!1),S(!1),ae(L.accessToken,L.refreshToken,C,R)}).catch(L=>{m(L.toString()),b(!1)})},z=()=>{S(!1),p(!0)};return n.exports.useEffect(()=>{N(!!(t&&s&&l&&c))},[t,s,l,c]),f("div",{children:[a(Lt,{role:"button",size:"30",onClick:T,className:"text-muted"}),f(A,{show:E,onHide:y,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[a(A.Header,{closeButton:!0,children:a(A.Title,{children:"Register"})}),a(A.Body,{children:f(u,{onSubmit:F,children:[f(u.Group,{className:"mb-3",children:[a(u.Label,{children:"User Name"}),a(u.Control,{type:"text",placeholder:"Phuong Ly",onChange:({target:k})=>o(k.value),value:t,pattern:Bt,autoComplete:"one-time-code",maxLength:"30"}),a(u.Text,{className:"text-muted",children:"Max length name is 20"})]}),f(u.Group,{className:"mb-3",children:[a(u.Label,{children:"Email address"}),a(u.Control,{type:"email",placeholder:"DanChoiVipPro69@gmail.com",onChange:({target:k})=>r(k.value),value:s,maxLength:"30",autoComplete:"one-time-code",pattern:ke}),a(u.Text,{className:"text-muted",children:"Max length email is 20"})]}),f(u.Group,{className:"mb-3",children:[a(u.Label,{children:"Password"}),a(u.Control,{type:"password",placeholder:"Password",onChange:({target:k})=>i(k.value),value:l,maxLength:"20",autoComplete:"one-time-code",pattern:Te}),a(u.Text,{className:"text-muted",children:"Must contain at least one number, one letter or more characters and at least 6"})]}),f(u.Group,{className:"mb-3",children:[a(u.Label,{children:"Confirm Password"}),a(u.Control,{type:"password",placeholder:"Confirm Password",onChange:({target:k})=>h(k.value),value:c,pattern:l,maxLength:"20",autoComplete:"one-time-code"})]}),g&&a(xe,{variant:"danger",children:g}),f("div",{className:"d-flex justify-content-between",children:[x?f(I,{variant:"primary",disabled:!0,children:[a(ue,{}),"Loading..."]}):a(I,{variant:"primary",type:"submit",disabled:!d,children:"Register"}),a(I,{variant:"primary",className:"float-end",onClick:z,children:"Login"})]})]})})]})]})}),It=n.exports.memo(function(){const[t,o]=n.exports.useState(!1),{stateAccessToken:s}=n.exports.useContext(G);return f(W,{to:"/profile?user_id="+Ze(s),onClick:()=>ce(),children:[a("img",{role:"button",width:"30",height:"30",src:"https://picsum.photos/1000",style:{objectFit:"cover",userSelect:"none"},onLoad:()=>o(!0),className:t?"rounded-circle me-3":"d-none"}),!t&&a("img",{className:"rounded-circle me-3",src:Ke,height:30,width:30})]})});function Ht({setStateAccessToken:e,setStateRefreshToken:t}){return a(Rt,{role:"button",size:"30",onClick:()=>{ae("","",e,t)},className:"text-muted"})}var jt=n.exports.memo(function(){const{stateAccessToken:t,setStateAccessToken:o,setStateRefreshToken:s}=n.exports.useContext(G);return window.onstorage=()=>{localStorage.getItem("accessToken")?o(JSON.parse(localStorage.getItem("accessToken"))):o("")},f("div",{children:[f("div",{className:t?"d-flex justify-content-around":"d-none",children:[a(Xe,{component:a(Mt,{style:{marginRight:18},role:"button",size:"30",className:"text-muted"})}),a(It,{}),a(Ht,{setStateAccessToken:o,setStateRefreshToken:s})]}),f("div",{className:t?"d-none":"d-flex justify-content-around",children:[a(Ot,{}),a(At,{})]})]})}),Xt=n.exports.memo(function(){const[t,o]=n.exports.useState("");return a(te,{expand:"md",style:{position:"sticky",top:0,background:"white"},children:f(rt,{children:[a(Qe,{}),a(te.Toggle,{"aria-controls":"basic-navbar-nav",className:"border-0 mt-2"}),f(te.Collapse,{id:"basic-navbar-nav",children:[a(Et,{find:t,setFind:o}),a(jt,{})]})]})})});export{Xt as default};
