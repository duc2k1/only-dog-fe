var P=Object.defineProperty,S=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var x=(a,t,l)=>t in a?P(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,y=(a,t)=>{for(var l in t||(t={}))k.call(t,l)&&x(a,l,t[l]);if(h)for(var l of h(t))F.call(t,l)&&x(a,l,t[l]);return a},w=(a,t)=>S(a,R(t));import{R as e,r as s}from"./vendor.48f3248e.js";import{F as f,f as L}from"./index.f46f344c.js";function N({error:a}){return a?e.createElement("div",{className:"alert alert-danger",role:"alert"},a):e.createElement(e.Fragment,null)}function U(){const{fire:a}=s.exports.useContext(f),[t,l]=s.exports.useState(""),[r,n]=s.exports.useState(""),[c,d]=s.exports.useState(""),[g,i]=s.exports.useState(!1),u=s.exports.useRef(null),b=()=>{console.log("hello")},v=async o=>{o.preventDefault();try{i(!0),await a.auth().signInWithEmailAndPassword(t,r),i(!1),u.current.click()}catch(p){l(""),n(""),d(p.message),i(!1)}};return e.createElement("div",null,e.createElement("button",{type:"button",className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#modalLogin",ref:u},"Login"),e.createElement("div",{className:"modal fade",id:"modalLogin",tabIndex:-1,"aria-labelledby":"modalLoginLabel","aria-hidden":"true"},e.createElement("div",{className:"modal-dialog"},e.createElement("div",{className:"modal-content"},e.createElement("div",{className:"modal-header"},e.createElement("h5",{className:"modal-title",id:"modalLoginLabel"},"Login"),e.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),e.createElement("div",{className:"modal-body"},e.createElement("form",{onSubmit:v,method:"POST",className:"py-3"},e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"email",className:"form-label"},"Email"),e.createElement("input",{type:"email",className:"form-control",id:"email",placeholder:"Email@example.com",onChange:({target:o})=>l(o.value),value:t,required:!0,maxLength:"50"})),e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"password",className:"form-label"},"Password"),e.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Password (min leangth = 6)",onChange:({target:o})=>n(o.value),value:r,required:!0,minLength:"6",maxLength:"50"})),e.createElement("button",{type:"submit",className:"btn btn-primary me-2"},"Login"),e.createElement("button",{className:"btn btn-outline-primary",onClick:()=>b()},"Login with Google ",e.createElement("i",{className:"fab fa-google"}))),e.createElement(N,{error:c}),g&&e.createElement("div",{className:"text-center"},e.createElement("div",{className:"spinner-border text-dark ",role:"status"})))))))}async function A(a){return(await L.firestore().collection("users").where("name","==",a.toLowerCase()).get()).docs.length>0}async function M(a){return(await L.firestore().collection("users").where("userId","==",a).get()).docs.map(r=>w(y({},r.data()),{docId:r.id}))}function I(){const{fire:a}=s.exports.useContext(f),[t,l]=s.exports.useState(""),[r,n]=s.exports.useState(""),[c,d]=s.exports.useState(""),[g,i]=s.exports.useState(""),[u,b]=s.exports.useState(""),[v,o]=s.exports.useState(!1),p=s.exports.useRef(null),C=async m=>{if(m.preventDefault(),o(!0),await A(t))l(""),b("That name is already taken, please try another."),o(!1);else try{const E=await a.auth().createUserWithEmailAndPassword(r,c);await E.user.updateProfile({displayName:t}),await a.firestore().collection("users").add({userId:E.user.uid,name:t.toLowerCase(),email:r.toLowerCase(),following:["2"],followers:[],dateCreated:Date.now()}),p.current.click(),o(!1)}catch(E){n(""),d(""),i(""),b(E.message),o(!1)}};return e.createElement("div",null,e.createElement("button",{type:"button",className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#modalRegister",ref:p},"Register"),e.createElement("div",{className:"modal fade",id:"modalRegister",tabIndex:-1,"aria-labelledby":"modalRegisterLabel","aria-hidden":"true"},e.createElement("div",{className:"modal-dialog"},e.createElement("div",{className:"modal-content"},e.createElement("div",{className:"modal-header"},e.createElement("h5",{className:"modal-title",id:"modalRegisterLabel"},"Register"),e.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),e.createElement("div",{className:"modal-body"},e.createElement("form",{onSubmit:C,method:"POST",className:"py-3"},e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"name",className:"form-label"},"Name"),e.createElement("input",{type:"text",className:"form-control",id:"name",placeholder:"Anri Okita",onChange:({target:m})=>l(m.value),value:t,required:!0,maxLength:"50"})),e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"email",className:"form-label"},"Email"),e.createElement("input",{type:"email",className:"form-control",id:"email",placeholder:"Email@example.com",onChange:({target:m})=>n(m.value),value:r,required:!0,maxLength:"50"})),e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"password",className:"form-label"},"Password"),e.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Password (min leangth = 6, max length = 50)",onChange:({target:m})=>d(m.value),value:c,required:!0,minLength:"6",maxLength:"50"})),e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"confirmPassword",className:"form-label"},"Confirm Password"),e.createElement("input",{type:"password",className:"form-control",id:"confirmPassword",placeholder:"Confirm Password",onChange:({target:m})=>i(m.value),value:g,pattern:c})),e.createElement("button",{type:"submit",className:"btn btn-primary me-2"},"Register")),e.createElement(N,{error:u}),v&&e.createElement("div",{className:"text-center"},e.createElement("div",{className:"spinner-border text-dark ",role:"status"})))))))}var O="/assets/logo.7e8cfe4c.svg";function q(){return e.createElement("div",null,e.createElement("div",null,e.createElement("button",{type:"button",className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal3"},"Add Post"),e.createElement("div",{className:"modal fade",id:"exampleModal3",tabIndex:-1,"aria-labelledby":"exampleModal3Label","aria-hidden":"true"},e.createElement("div",{className:"modal-dialog"},e.createElement("div",{className:"modal-content"},e.createElement("div",{className:"modal-header"},e.createElement("h5",{className:"modal-title",id:"exampleModal3Label"},"Post"),e.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),e.createElement("div",{className:"modal-body"},e.createElement("form",null,e.createElement("div",{className:"form-group mb-2"},e.createElement("input",{type:"file",className:"form-control-file",id:"exampleFormControlFile1"}))),e.createElement(N,null)),e.createElement("div",{className:"modal-footer"},e.createElement("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"),e.createElement("button",{type:"button",className:"btn btn-primary"},"Add Post")))))))}function D(a){const[t,l]=s.exports.useState();return s.exports.useEffect(()=>{async function r(n){const[c]=await M(n);l(c||{})}a&&r(a)},[a]),{user:t,setActiveUser:l}}const T=s.exports.createContext(null);var j=T;function H({setPage:a,user:t}){const{user:l,setActiveUser:r}=D(t==null?void 0:t.uid);l&&console.log(l);const{fire:n}=s.exports.useContext(f);return e.createElement(j.Provider,{value:{user:l,setActiveUser:r}},e.createElement("nav",{style:{position:"sticky",top:0,zIndex:1051},className:"navbar navbar-expand-lg navbar-light"},e.createElement("div",{className:"container-fluid"},e.createElement("a",{className:"navbar-brand",href:""},e.createElement("img",{src:O,alt:"Logo OnlyDog",width:100,onClick:()=>a("dashboard")})),e.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},e.createElement("span",{className:"navbar-toggler-icon"})),e.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},e.createElement("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0"}),e.createElement("div",{className:n.auth().currentUser?"":"d-none"},e.createElement("div",{className:"nav-item me-2 mt-2"},e.createElement(q,null)),e.createElement("div",{className:"nav-item me-2 mt-2",onClick:()=>a("profile")},"Profile"),e.createElement("div",{className:"nav-item me-2 mt-2",onClick:()=>n.auth().signOut()},"Logout")),e.createElement("div",{className:n.auth().currentUser?"d-none":""},e.createElement("div",{className:"nav-item me-2 mt-2"},e.createElement(U,null)),e.createElement("div",{className:"nav-item me-2 mt-2"},e.createElement(I,null)))))))}export{H as default};
