import{R as e,r as a}from"./vendor.a7ce470e.js";import{F as N,s as f}from"./index.fa87c8ed.js";import{d as y,u as w}from"./useUser.231bd9b7.js";function h({error:t}){return t?e.createElement("div",{className:"alert alert-danger",role:"alert"},t):e.createElement(e.Fragment,null)}function L(){const{fire:t}=a.exports.useContext(N),[l,n]=a.exports.useState(""),[o,s]=a.exports.useState(""),[d,u]=a.exports.useState(""),[p,m]=a.exports.useState(!1),r=a.exports.useRef(null),b=()=>{console.log("hello")},v=async c=>{c.preventDefault();try{m(!0),await t.auth().signInWithEmailAndPassword(l,o),m(!1),r.current.click()}catch(g){n(""),s(""),u(g.message),m(!1)}};return e.createElement("div",null,e.createElement("button",{type:"button",className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#modalLogin",ref:r},"Login"),e.createElement("div",{className:"modal fade",id:"modalLogin",tabIndex:-1,"aria-labelledby":"modalLoginLabel","aria-hidden":"true"},e.createElement("div",{className:"modal-dialog"},e.createElement("div",{className:"modal-content"},e.createElement("div",{className:"modal-header"},e.createElement("h5",{className:"modal-title",id:"modalLoginLabel"},"Login"),e.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),e.createElement("div",{className:"modal-body"},e.createElement("form",{onSubmit:v,method:"POST",className:"py-3"},e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"email",className:"form-label"},"Email"),e.createElement("input",{type:"email",className:"form-control",placeholder:"Email@example.com",onChange:({target:c})=>n(c.value),value:l,required:!0,maxLength:"50"})),e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"password",className:"form-label"},"Password"),e.createElement("input",{type:"password",className:"form-control",placeholder:"Password (min leangth = 6)",onChange:({target:c})=>s(c.value),value:o,required:!0,minLength:"6",maxLength:"50"})),e.createElement("button",{type:"submit",className:"btn btn-primary me-2"},"Login"),e.createElement("button",{className:"btn btn-outline-primary",onClick:()=>b()},"Login with Google ",e.createElement("i",{className:"fab fa-google"}))),e.createElement(h,{error:d}),p&&e.createElement("div",{className:"text-center"},e.createElement("div",{className:"spinner-border text-dark ",role:"status"})))))))}function C(){const{fire:t}=a.exports.useContext(N),[l,n]=a.exports.useState(""),[o,s]=a.exports.useState(""),[d,u]=a.exports.useState(""),[p,m]=a.exports.useState(""),[r,b]=a.exports.useState(""),[v,c]=a.exports.useState(!1),g=a.exports.useRef(null),x=async i=>{if(i.preventDefault(),c(!0),await y(l))n(""),b("That name is already taken, please try another."),c(!1);else try{const E=await t.auth().createUserWithEmailAndPassword(o,d);await E.user.updateProfile({displayName:l}),await t.firestore().collection("users").add({userId:E.user.uid,name:l.toLowerCase(),email:o.toLowerCase(),following:[],followers:[],dateCreated:Date.now(),posts:[]}),g.current.click(),c(!1)}catch(E){s(""),u(""),m(""),b(E.message),c(!1)}};return e.createElement("div",null,e.createElement("button",{type:"button",className:"btn btn-outline-primary","data-bs-toggle":"modal","data-bs-target":"#modalRegister",ref:g},"Register"),e.createElement("div",{className:"modal fade",id:"modalRegister",tabIndex:-1,"aria-labelledby":"modalRegisterLabel","aria-hidden":"true"},e.createElement("div",{className:"modal-dialog"},e.createElement("div",{className:"modal-content"},e.createElement("div",{className:"modal-header"},e.createElement("h5",{className:"modal-title",id:"modalRegisterLabel"},"Register"),e.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),e.createElement("div",{className:"modal-body"},e.createElement("form",{onSubmit:x,method:"POST",className:"py-3"},e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"name",className:"form-label"},"Name"),e.createElement("input",{type:"text",className:"form-control",placeholder:"Anri Okita",onChange:({target:i})=>n(i.value),value:l,required:!0,maxLength:"50"})),e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"email",className:"form-label"},"Email"),e.createElement("input",{type:"email",className:"form-control",placeholder:"Email@example.com",onChange:({target:i})=>s(i.value),value:o,required:!0,maxLength:"50"})),e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"password",className:"form-label"},"Password"),e.createElement("input",{type:"password",className:"form-control",placeholder:"Password (min leangth = 6, max length = 50)",onChange:({target:i})=>u(i.value),value:d,required:!0,minLength:"6",maxLength:"50"})),e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"confirmPassword",className:"form-label"},"Confirm Password"),e.createElement("input",{type:"password",className:"form-control",placeholder:"Confirm Password",onChange:({target:i})=>m(i.value),value:p,pattern:d})),e.createElement("button",{type:"submit",className:"btn btn-primary me-2"},"Register")),e.createElement(h,{error:r}),v&&e.createElement("div",{className:"text-center"},e.createElement("div",{className:"spinner-border text-dark ",role:"status"})))))))}var P="/assets/logo.7e8cfe4c.svg";function S(){const[t,l]=a.exports.useState(null),[n,o]=a.exports.useState(""),[s,d]=a.exports.useState(0),u=m=>{m.target.files[0]&&l(m.target.files[0])},p=()=>{f.ref(`images/${t.name}`).put(t).on("state_changed",r=>{const b=Math.round(r.bytesTransferred/r.totalBytes*100);d(b)},r=>{console.log(r)},()=>{f.ref("images").child(t.name).getDownloadURL().then(r=>{o(r)})})};return e.createElement("div",null,e.createElement("div",null,e.createElement("button",{type:"button",className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal3"},"Add Post"),e.createElement("div",{className:"modal fade",id:"exampleModal3",tabIndex:-1,"aria-labelledby":"exampleModal3Label","aria-hidden":"true"},e.createElement("div",{className:"modal-dialog"},e.createElement("div",{className:"modal-content"},e.createElement("div",{className:"modal-header"},e.createElement("h5",{className:"modal-title",id:"exampleModal3Label"},"Post"),e.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),e.createElement("div",{className:"modal-body"},e.createElement("div",{className:"container-fluid"},e.createElement("div",{className:"row"},e.createElement("input",{className:"col-sm-6",type:"file",onChange:u}),e.createElement("div",{className:"text-center col-sm-6"},e.createElement("button",{type:"button",className:"btn btn-primary",onClick:p,style:{width:80}},"Upload")),e.createElement("img",{src:n||"http://via.placeholder.com/100",alt:"firebase-image",className:"col-sm-6"}),e.createElement("progress",{style:{marginTop:100},value:s,max:"100",className:"col-sm-6"}),e.createElement("p",null,n&&"Upload success")))))))))}const R=a.exports.createContext(null);var k=R;function A({setPage:t,user:l}){const{user:n,setActiveUser:o}=w(l==null?void 0:l.uid),{fire:s}=a.exports.useContext(N);return e.createElement(k.Provider,{value:{user:n,setActiveUser:o}},e.createElement("nav",{style:{position:"sticky",top:0,zIndex:1051},className:"navbar navbar-expand-lg navbar-light"},e.createElement("div",{className:"container-fluid"},e.createElement("a",{className:"navbar-brand",href:""},e.createElement("img",{src:P,alt:"Logo OnlyDog",width:200,onClick:()=>t("dashboard")})),e.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},e.createElement("span",{className:"navbar-toggler-icon"})),e.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},e.createElement("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0"}),e.createElement("div",{className:`${s.auth().currentUser?"":"d-none"} d-flex`},e.createElement("div",{className:"nav-item me-2 mt-2"},e.createElement(S,null)),e.createElement("div",{className:"nav-item me-2 mt-2",onClick:()=>t("profile"),style:{lineHeight:2.5}},"Profile"),e.createElement("div",{className:"nav-item me-2 mt-2",onClick:()=>s.auth().signOut(),style:{lineHeight:2.5}},"Logout")),e.createElement("div",{className:`${s.auth().currentUser?"d-none":""} d-flex`},e.createElement("div",{className:"nav-item me-2 mt-2"},e.createElement(L,null)),e.createElement("div",{className:"nav-item me-2 mt-2"},e.createElement(C,null)))))))}export{A as default};
